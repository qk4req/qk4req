<!DOCTYPE html>
<html>
<head>
	<title></title>
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css?v=0" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
	<link rel="stylesheet" type="text/css" href="https://daneden.github.io/animate.css/animate.min.css">
	<link rel="stylesheet" type="text/css" href="file:///C:/Users/admin/Desktop/Stream/Alerts/default.css">
	<link href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans+Condensed" rel="stylesheet">
	<!--<script type="text/javascript" src="http://momentjs.com/downloads/moment.js"></script>-->
</head>
<body>
	<div class="header">
		<div class="b b1">
			<div class="p animated">
				<div class="h"></div>
				<div class="t"></div>
				<div class="f"></div>
			</div>
		</div>
		<div class="b b2">
			<div class="p animated">
				<div class="h"></div>
				<div class="t"></div>
				<div class="f"></div>
			</div>
		</div>
		<div class="b b3">
			<div class="p animated">
				<div class="h"></div>
				<div class="t"></div>
				<div class="f"></div>
			</div>
		</div>
	</div>
	<div class="right-sidebar">
	</div>
	<div class="dubbing" style="display: none;"></div>
	<script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
	<script type="text/javascript">
		var timings = {
			//HEADER
			//время начала/конца слайдинга блоков
			startFirstBlockSliding: 4500,
			endFirstBlockSliding: 9500,
			startSecondBlockSliding: 5500,
			endSecondBlockSliding: 10500,
			startThirdBlockSliding: 6500,
			endThirdBlockSliding: 11500,
			//время появления и исчезновения блоков
			appearanceFirstBlock: 4000,
			disappearanceFirstBlock: 10000,
			appearanceSecondBlock: 5000,
			disappearanceSecondBlock: 11000,
			appearanceThirdBlock: 6000,
			disappearanceThirdBlock: 12000,
			//интервал между показами блоков
			intervalBetweenHeadingUpdates: 300000/*5min*/,
			//пауза между показом второго блока
			firstPause: 20000,
			//RIGHT-SIDEBAR
			eventShowTime: 10000,
			intervalBetweenEventUpdates: 2000
		};
		setInterval(function() {
			$.ajax({
				type: "GET",
				dataType: "json",
				url: "http://r3l14ct/api.events",
				success: function(response) {
					if (response["donation"]!==null) {
						var donation = response["donation"];
						$(".right-sidebar").append("<div class=\"e e1 animated\" data-status=\"0\" data-created-at=\""+new Date(donation["created_at"]).getTime()+"\"><span>"+donation["what"]+" - "+donation["sum"]+" <i class=\"fas fa-ruble-sign\"></i></span></div>");
						$(".dubbing").append("<video controls=\"\" autoplay=\"\" name=\"media\"><source src=\"file:///C:/Users/admin/Downloads/%D0%9C%D1%83%D1%81%D0%BE%D1%80/GenYoutube.net_%D0%9F%D0%B0%D0%BF%D0%B8%D1%87-%D0%A1%D0%BF%D0%B0%D1%81%D0%B8%D0%B1%D0%BE-%D1%88%D0%BD%D1%8B%D1%80%D1%8C-%D0%BA%D1%83%D1%80%D1%8C%D0%B5%D1%80_ekSC5173gaA%20(audio-cutter.com).mp3\" type=\"audio/mp3\"></video>");
					}
					if (response["follower"]!==null) {
						var follower = response["follower"];
						$(".right-sidebar").append("<div class=\"e e2 animated\" data-status=\"0\" data-created-at=\""+new Date(follower["user"]["created_at"]).getTime()+"\"><span>"+follower["user"]["display_name"]+"</span></div>");
					}
					if (response["subscription"]!==null) {
						var subscription = response["subscription"];
						$(".right-sidebar").append("<div class=\"e e3 animated\" data-status=\"0\" data-created-at=\""+new Date(subscription["user"]["created_at"]).getTime()+"\"><span>"+subscription["user"]["display_name"]+"</span></div>");
					}
				}
			});
			$('.right-sidebar>div[data-status=0]').sort(function(a, b) {
				a = parseInt($(a).attr("data-created-at"), 10);
	    		b = parseInt($(b).attr("data-created-at"), 10);
	    		// compare
	    		if(a > b) {
	    		    return 1;
	    		} else if(a < b) {
	    		    return -1;
	    		} else {
	    		    return 0;
	    		}
			}).appendTo('.right-sidebar');
			$(".right-sidebar>div").each(function(index){
				if ($(this).attr("data-status")=="0" && $(".right-sidebar>div[data-status=1]").length<3) {
					var el = $(".right-sidebar>div:eq("+index+")");
					el.addClass("lightSpeedIn").attr("data-status", "1").show();
					setTimeout(function() {
						el.removeClass("lightSpeedIn").addClass("rotateOutUpRight").attr("data-status", "2");
					}, timings.eventShowTime);
				}
				else if ($(this).attr("data-status")=="2") $(this).remove();
			});
		}, timings.intervalBetweenEventUpdates);
		setInterval(function() {
			$(".h").removeClass().addClass(function(index){return("h h"+(index+1));});
			$(".t").empty();
			$(".f").removeClass().addClass(function(index){return("f f"+(index+1));});
			$.ajax({
				type: "GET",
				dataType: "json",
				url: "http://r3l14ct/api.donations",
				success: function(response) {
					if(response!==null) {
						$.each(response, function(index, donation) {
							$(".b1 .t").append("<p>"+donation["what"]+"<span>"+donation["sum"]+" <i class=\"fas fa-ruble-sign\"></i></span></p>");
						});
						setTimeout(function(){$(".b1 .t").slideDown("slow");}, timings.startFirstBlockSliding);
						setTimeout(function(){$(".b1 .t").slideUp("slow");}, timings.endFirstBlockSliding);
					}
				}
			});
			$.ajax({
				type: "GET",
				dataType: "json",
				url: "http://r3l14ct/api.followers",
				success: function(response) {
					if(response!==null) {
						$.each(response, function(index, follower) {
							$(".b2 .t").append("<p>"+follower["user"]["display_name"]+"<span><i style=\"font-size:17px;\" class=\"fab fa-twitch\"></i><i style=\"font-size:7px;\" class=\"fas fa-plus\"></i></span></p>");
						});
						setTimeout(function(){$(".b2 .t").slideDown("slow");}, timings.startSecondBlockSliding);
						setTimeout(function(){$(".b2 .t").slideUp("slow");}, timings.endSecondBlockSliding);
					}
				}
			});
			$.ajax({
				type: "GET",
				dataType: "json",
				url: "http://r3l14ct/api.subscriptions",
				success: function(response) {
					if(response!==null) {
						$.each(response, function(index, subscriptions) {
							$(".b3 .t").append("<p>"+subscriptions["user"]["display_name"]+"<span><i style=\"font-size:17px;\" class=\"fab fa-twitch\"></i><i style=\"font-size:7px;\" class=\"fas fa-plus\"></i></span></p>");
						});
						setTimeout(function(){$(".b3 .t").slideDown("slow");}, timings.startThirdBlockSliding);
						setTimeout(function(){$(".b3 .t").slideUp("slow");}, timings.endThirdBlockSliding);
					}
				}
			});
			setTimeout(function(){$(".b1 .p").removeClass("slideOutUp").addClass("slideInDown").show();}, timings.appearanceFirstBlock);
			setTimeout(function(){$(".b1 .p").removeClass("slideInDown").addClass("slideOutUp");}, timings.disappearanceFirstBlock);
			setTimeout(function(){$(".b2 .p").removeClass("slideOutUp").addClass("slideInDown").show();}, timings.appearanceSecondBlock);
			setTimeout(function(){$(".b2 .p").removeClass("slideInDown").addClass("slideOutUp");}, timings.disappearanceSecondBlock);
			setTimeout(function(){$(".b3 .p").removeClass("slideOutUp").addClass("slideInDown").show();}, timings.appearanceThirdBlock);
			setTimeout(function(){$(".b3 .p").removeClass("slideInDown").addClass("slideOutUp");}, timings.disappearanceThirdBlock);



			setTimeout(function(){
				$(".h").removeClass().addClass(function(index){return("h h"+(index+4));});
				$(".t").empty();
				$(".f").removeClass().addClass(function(index){return("f f"+(index+4));});
				$.ajax({
					type: "GET",
					dataType: "json",
					url: "http://widget.donatepay.ru/widgets/statistics/430251/a3612b949332d692a8fafcb388c51fda9f6f003284c31f43428633b1ca0cf83b/statistics?last_id=0",
					success: function(response) {
						if (response['result']!==undefined && response['result'].length>0) {
							$.each(response['result'], function(index, donation) {
								var s;
								s = donation.message.split('|');
								$(".b1 .t").append("<p>"+s[0]+"<span>"+s[1]+" <i class=\"fas fa-ruble-sign\"></i></span></p>");
							});
							setTimeout(function(){$(".b1 .t").slideDown("slow");}, timings.startFirstBlockSliding);
							setTimeout(function(){$(".b1 .t").slideUp("slow");}, timings.endFirstBlockSliding);
						}
					}
				});
				$.ajax({
					type: "GET",
					dataType: "json",
					url: "http://widget.donatepay.ru/widgets/statistics/430256/a3612b949332d692a8fafcb388c51fda9f6f003284c31f43428633b1ca0cf83b/statistics?last_id=0",
					success: function(response) {
						if (response['result']!==undefined && response['result'].length>0) {
							$.each(response['result'], function(index, donation) {
								var s;
								s = donation.message.split('|');
								$(".b2 .t").append("<p>"+s[0]+"<span>"+s[1]+" <i class=\"fas fa-ruble-sign\"></i></span></p>");
							});
							setTimeout(function(){$(".b2 .t").slideDown("slow");}, timings.startSecondBlockSliding);
							setTimeout(function(){$(".b2 .t").slideUp("slow");}, timings.endSecondBlockSliding);
						}
					}
				});
				$.ajax({
					type: "GET",
					dataType: "json",
					url: "http://widget.donatepay.ru/widgets/statistics/430274/a3612b949332d692a8fafcb388c51fda9f6f003284c31f43428633b1ca0cf83b/statistics?last_id=0",
					success: function(response) {
						if (response['result']!==undefined && response['result'].length>0) {
							$.each(response['result'], function(index, donation) {
								var s;
								s = donation.message.split('|');
							$(".b3 .t").append("<p>"+s[0]+"<span>"+s[1]+" <i class=\"fas fa-ruble-sign\"></i></span></p>");
							});
							setTimeout(function(){$(".b3 .t").slideDown("slow");}, timings.startThirdBlockSliding);
							setTimeout(function(){$(".b3 .t").slideUp("slow");}, timings.endThirdBlockSliding);
						}
					}
				});
				setTimeout(function(){$(".b1 .p").removeClass("slideOutUp").addClass("slideInDown").show();}, timings.appearanceFirstBlock);
				setTimeout(function(){$(".b1 .p").removeClass("slideInDown").addClass("slideOutUp");}, timings.disappearanceFirstBlock);
				setTimeout(function(){$(".b2 .p").removeClass("slideOutUp").addClass("slideInDown").show();}, timings.appearanceSecondBlock);
				setTimeout(function(){$(".b2 .p").removeClass("slideInDown").addClass("slideOutUp");}, timings.disappearanceSecondBlock);
				setTimeout(function(){$(".b3 .p").removeClass("slideOutUp").addClass("slideInDown").show();}, timings.appearanceThirdBlock);
				setTimeout(function(){$(".b3 .p").removeClass("slideInDown").addClass("slideOutUp");}, timings.disappearanceThirdBlock);
			}, timings.firstPause);
		}, timings.intervalBetweenHeadingUpdates);
	</script>
</body>
</html>